webpackJsonp([1],{"93P3":function(t,e){},BrbZ:function(t,e){},Hoyl:function(t,e){},Kkor:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("dyyu")},null,null).exports,r=s("/ocq"),o=s("mw3O"),l=s.n(o),c={data:function(){return{user:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名称",trigger:"submit"}],password:[{required:!0,message:"请输入密码",trigger:"submit"},{min:6,message:"密码最少为6位",trigger:"submit"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post(e.$api.login,l.a.stringify(e.user)).then(function(t){console.log(t),1e3==t.data.code&&(e.$notify({title:"成功",message:"登录成功",type:"success"}),e.$router.push({name:"index"}))})})},pushRouter:function(){this.$router.push({name:"signUp"})},clearValidateField:function(){this.$refs.user.clearValidate()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("p",{staticClass:"title"},[t._v("景田大厦1007工作室")]),t._v(" "),s("el-form",{ref:"user",staticClass:"demo-ruleForm",attrs:{model:t.user,"label-position":"left",rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"name"}},[s("el-input",{on:{focus:t.clearValidateField},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},on:{focus:t.clearValidateField},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),s("el-form-item",[s("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("user")}}},[t._v("登录")]),t._v(" "),s("el-button",{staticClass:"btn",on:{click:t.pushRouter}},[t._v("注册")])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(t){s("Hoyl")},"data-v-022e84dc",null).exports,m={name:"signUp",data:function(){var t=this;return{user:{name:"",password:"",checkPassword:""},rules:{name:[{required:!0,message:"请输入用户名称",trigger:"submit"}],password:[{required:!0,message:"请输入密码",trigger:"submit"},{min:6,message:"密码最少为6位",trigger:"submit"},{validator:function(e,s,a){""===s?a(new Error("请输入密码")):(""!==t.user.checkPassword&&t.$refs.user.validateField("checkPassword"),a())},trigger:"submit"}],checkPassword:[{required:!0,message:"请输入确认密码",trigger:"submit"},{validator:function(e,s,a){""===s?a(new Error("请再次输入密码")):s!==t.user.password?a(new Error("两次输入密码不一致!")):a()},trigger:"submit"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post(e.$api.signUp,l.a.stringify(e.user)).then(function(t){console.log(t),1e3==t.data.code&&(e.$notify({title:"成功",message:"用户信息注册成功",type:"success"}),e.$router.push({name:"login"}))})})},pushRouter:function(){this.$router.push({name:"login"})},clearValidateField:function(){this.$refs.user.clearValidate()}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sign-up"},[s("p",{staticClass:"title"},[t._v("景田大厦1007工作室")]),t._v(" "),s("el-form",{ref:"user",staticClass:"demo-ruleForm",attrs:{model:t.user,"label-position":"left",rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"name"}},[s("el-input",{on:{focus:t.clearValidateField},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},on:{focus:t.clearValidateField},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[s("el-input",{attrs:{type:"password"},on:{focus:t.clearValidateField},model:{value:t.user.checkPassword,callback:function(e){t.$set(t.user,"checkPassword",e)},expression:"user.checkPassword"}})],1),t._v(" "),s("el-form-item",[s("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("user")}}},[t._v("注册")]),t._v(" "),s("el-button",{staticClass:"btn",on:{click:t.pushRouter}},[t._v("登录")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(m,f,!1,function(t){s("BrbZ")},"data-v-cda77d0a",null).exports,v={name:"asideMenu",components:{},data:function(){return{}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"asideMenu"},[e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:this.handleOpen,close:this.handleClose}},[e("el-menu-item",{attrs:{index:"2",disabled:""}},[e("i",{staticClass:"el-icon-menu"}),this._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[this._v("新建账单")])]),this._v(" "),e("el-menu-item",{attrs:{index:"3",disabled:""}},[e("i",{staticClass:"el-icon-document"}),this._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[this._v("结算账单")])])],1)],1)},staticRenderFns:[]};var _={name:"commonHeader",data:function(){return{user:{name:void 0}}},methods:{initData:function(){var t=this;this.$axios.get(this.$api.getUserInfo).then(function(e){1e3==e.data.code&&(t.user=e.data.data)})},signOut:function(){var t=this;this.$axios.get(this.$api.signOut).then(function(e){1e3==e.data.code&&(t.$notify({title:"成功",message:"登出成功",type:"success"}),t.$router.push({name:"login"}))})}},created:function(){this.initData()}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"system-name"},[t._v("景田大厦1007工作室")]),t._v(" "),s("div",{staticClass:"user-info"},[s("span",{staticClass:"user-name"},[t._v("当前账号："+t._s(t.user.name))]),t._v(" "),s("span",{staticClass:"user-line"},[t._v("|")]),t._v(" "),s("a",{staticClass:"user-signOut",attrs:{href:"javascript:;"},on:{click:t.signOut}},[t._v("退出登录")])])])},staticRenderFns:[]};var C={name:"index",components:{asideMenu:s("VU/8")(v,h,!1,function(t){s("eQvX")},"data-v-2a88e19e",null).exports,commonHeader:s("VU/8")(_,g,!1,function(t){s("sERZ")},"data-v-031d7bfb",null).exports}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("asideMenu")],1),this._v(" "),e("el-container",[e("el-header",[e("commonHeader")],1),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var k=s("VU/8")(C,b,!1,function(t){s("Kkor")},"data-v-b8fca470",null).exports,y={name:"sumData",data:function(){return{sum:{sumPay:void 0,closeSum:void 0,unCloseSum:void 0,unClosePay:void 0,shouldPay:0}}},methods:{initData:function(){var t=this;this.$axios.get(this.$api.queryTypeData).then(function(e){1e3==e.data.code&&(t.sum=e.data.data)})}},created:function(){this.initData()}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sum-data"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:11,sm:8,md:8,lg:8,xl:8}},[s("div",{staticClass:"item-content"},[s("p",{staticClass:"title closeSum"},[t._v("已结算总数")]),t._v(" "),s("div",{staticClass:"item-main"},[s("span",{staticClass:"num"},[t._v("\n            "+t._s(t.sum.closeSum)+"\n          ")])])])]),t._v(" "),s("el-col",{attrs:{xs:11,sm:8,md:8,lg:8,xl:8}},[s("div",{staticClass:"item-content"},[s("p",{staticClass:"title sumPay"},[t._v("累计已支出")]),t._v(" "),s("div",{staticClass:"item-main"},[s("span",{staticClass:"num"},[t._v("\n            "+t._s(t.sum.sumPay)+"\n          ")])])])]),t._v(" "),s("el-col",{attrs:{xs:11,sm:8,md:8,lg:8,xl:8}},[s("div",{staticClass:"item-content"},[s("p",{staticClass:"title unCloseSum"},[t._v("未结算总数")]),t._v(" "),s("div",{staticClass:"item-main"},[s("span",{staticClass:"num"},[t._v("\n            "+t._s(t.sum.unCloseSum)+"\n          ")])])])]),t._v(" "),s("el-col",{attrs:{xs:11,sm:8,md:8,lg:8,xl:8}},[s("div",{staticClass:"item-content"},[s("p",{staticClass:"title unClosePay"},[t._v("未结算支出")]),t._v(" "),s("div",{staticClass:"item-main"},[s("span",{staticClass:"num"},[t._v("\n            "+t._s(t.sum.unClosePay)+"\n          ")])])])]),t._v(" "),s("el-col",{attrs:{xs:4,sm:8,md:8,lg:8,xl:8}},[s("div",{staticClass:"item-content"},[t.sum.shouldPay>=0?s("p",{staticClass:"title shouldPay"},[t._v("本期应支出")]):s("p",{staticClass:"title shouldPay"},[t._v("本期可收入")]),t._v(" "),s("div",{staticClass:"item-main"},[s("span",{staticClass:"num"},[t._v("\n            "+t._s(t.sum.shouldPay>=0?t.sum.shouldPay:-t.sum.shouldPay)+"\n          ")])])])])],1)],1)},staticRenderFns:[]};var x=s("VU/8")(y,$,!1,function(t){s("Y9qY")},"data-v-27c9c170",null).exports,w={name:"createBillMask",data:function(){return{form:{num:void 0,date:void 0,sharer:[],remark:void 0},rules:{num:[{required:!0,message:"账单金额不能为空！",trigger:"submit"},{validator:function(t,e,s){var a;a=e,new RegExp("^(([1-9]{1}\\d*)|(0{1}))(\\.\\d{0,2})?$").test(a)?s():s(new Error("请输入数字值(最多可保留小数点后两位)"))},trigger:"submit"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],sharer:[{type:"array",required:!0,message:"请至少选择一个账单分担者",trigger:"submit"}]},userList:[]}},methods:{onCancel:function(){this.$emit("cancel")},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var s={};s.num=e.form.num,s.date=e.form.date,s.remark=e.form.remark,s.sharer=e.form.sharer.join(","),e.$axios.post(e.$api.billsAdd,l.a.stringify(s)).then(function(t){1e3==t.data.code&&(e.$notify({title:"成功",message:"添加成功",type:"success"}),e.$emit("submit")),e.$emit("cancel")})})},clearValidateField:function(){this.$refs.user.clearValidate()},getUserList:function(){var t=this;this.$axios.get(this.$api.getUserList).then(function(e){if(1e3==e.data.code){t.userList=e.data.data;var s=[];t.userList.map(function(t,e){s.push(t.name)}),t.$set(t.form,"sharer",s)}})}},created:function(){this.getUserList()}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mask"},[s("div",{staticClass:"center"},[s("div",{staticClass:"title-box clearfix"},[s("span",{staticClass:"title"},[t._v("新建账单")]),t._v(" "),s("i",{staticClass:"el-icon-close close",on:{click:t.onCancel}})]),t._v(" "),s("div",{staticClass:"mask-content"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"100px"}},[s("el-form-item",{attrs:{label:"账单金额",prop:"num"}},[s("el-input",{model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"花费日期",prop:"date"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"账单分担",prop:"sharer"}},[s("el-checkbox-group",{model:{value:t.form.sharer,callback:function(e){t.$set(t.form,"sharer",e)},expression:"form.sharer"}},t._l(t.userList,function(e,a){return s("el-checkbox",{key:a,attrs:{label:e.name,name:"sharer"}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"账单备注"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("确定")]),t._v(" "),s("el-button",{staticClass:"btn cancel-btn",on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)])])},staticRenderFns:[]};var F=s("VU/8")(w,M,!1,function(t){s("w1MG")},"data-v-53424f9c",null).exports,S={name:"confirmMask",props:{title:{type:String,default:"确定进行下一步操作吗？"}},data:function(){return{content:this.title}},methods:{cancel:function(){this.$emit("cancel")},submit:function(){this.$emit("next")}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mask"},[s("div",{staticClass:"center"},[s("div",{staticClass:"title"},[t._v(t._s(t.content))]),t._v(" "),s("div",{staticClass:"btn-box clearfix"},[s("a",{staticClass:"yes",attrs:{href:"javascript:;"},on:{click:t.submit}},[t._v("确定")]),t._v(" "),s("a",{staticClass:"no",attrs:{href:"javascript:;"},on:{click:t.cancel}},[t._v("取消")])])])])},staticRenderFns:[]};var P={name:"home",components:{sumData:x,createBillMask:F,confirmMask:s("VU/8")(S,U,!1,function(t){s("O2fQ")},"data-v-e58332fe",null).exports},data:function(){return{isShowCreateMask:!1,isShowConfirmMask:!1,isShowSumData:!0}},methods:{closeCreateMask:function(){this.isShowCreateMask=!1},openCreateMask:function(){this.isShowCreateMask=!0},reFleshSumData:function(){var t=this;this.isShowSumData=!1,this.$nextTick(function(){return t.isShowSumData=!0})},closeConfirmMask:function(){this.isShowConfirmMask=!1},openConfirmMask:function(){this.isShowConfirmMask=!0},closeBills:function(){var t=this;this.$axios.post(this.$api.billsClose).then(function(e){1e3==e.data.code&&(t.$notify({title:"成功",message:"结算成功",type:"success"}),t.reFleshSumData()),t.closeConfirmMask()})}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"module-main"},[s("div",{staticClass:"module-top"},[s("p",{staticClass:"module-title"},[t._v("数据汇总")]),t._v(" "),s("el-button",{staticClass:"create",attrs:{type:"text"},on:{click:t.openCreateMask}},[t._v("新建账单")]),t._v(" "),s("el-button",{staticClass:"close",attrs:{type:"text"},on:{click:t.openConfirmMask}},[t._v("结算账单")])],1),t._v(" "),s("div",{staticClass:"module-content"},[t.isShowSumData?s("sum-data"):t._e()],1)]),t._v(" "),t.isShowCreateMask?s("createBillMask",{on:{cancel:t.closeCreateMask,submit:t.reFleshSumData}}):t._e(),t._v(" "),t.isShowConfirmMask?s("confirmMask",{attrs:{title:"确定结算当前所有未结算账单吗？"},on:{cancel:t.closeConfirmMask,next:t.closeBills}}):t._e()],1)},staticRenderFns:[]};var D=s("VU/8")(P,V,!1,function(t){s("lUvI")},"data-v-3c9221c8",null).exports;a.default.use(r.a);var E=new r.a({routes:[{path:"/login",name:"login",component:d},{path:"/signUp",name:"signUp",component:p},{path:"/",name:"index",redirect:"/index",component:k,children:[{path:"/index",name:"home",component:D}]}]}),R=(s("u7Vc"),s("//Fk")),q=s.n(R),O=s("Dd8w"),L=s.n(O),j=s("mtWM"),B=s.n(j),H=s("zL8q"),A=s.n(H);s("93P3");a.default.use(A.a),B.a.interceptors.request.use(function(t){return"get"==t.method&&(t.params=L()({_t:Date.parse(new Date)/1e3},t.params)),t},function(t){return q.a.reject(t)}),B.a.interceptors.response.use(function(t){return 1e3==t.data.code?t:(1001==t.data.code?a.default.prototype.$notify.error({title:"错误信息提示",duration:2500,message:t.data.desc}):1002==t.data.code?a.default.prototype.$notify.error({title:"错误信息提示",duration:2500,message:t.data.desc}):1003==t.data.code?E.push({name:"login"}):1004==t.data.code?a.default.prototype.$notify.error({title:"错误信息提示",duration:2500,message:t.data.desc}):1005==t.data.code&&a.default.prototype.$notify.error({title:"错误信息提示",duration:2500,message:t.data.desc}),t)},function(t){return q.a.reject(t)});var I=B.a,T={signUp:"/api/user/signUp",login:"/api/user/login",signOut:"/api/user/signOut",queryTypeData:"/api/bills/queryTypeData",getUserInfo:"/api/user/getUserInfo",getUserList:"/api/user/getUserList",billsAdd:"/api/bills/add",billsClose:"/api/bills/close"};a.default.config.productionTip=!1,a.default.prototype.$axios=I,a.default.prototype.$api=T,a.default.use(A.a),new a.default({el:"#app",router:E,components:{App:n},template:"<App/>"})},O2fQ:function(t,e){},Y9qY:function(t,e){},dyyu:function(t,e){},eQvX:function(t,e){},lUvI:function(t,e){},sERZ:function(t,e){},w1MG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5025d9042f8d34678b1b.js.map